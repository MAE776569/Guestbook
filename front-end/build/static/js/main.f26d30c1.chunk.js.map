{"version":3,"sources":["store.js","utils/API.js","components/NavBar.js","components/SearchUsers.js","components/UserItem.js","components/UsersList.js","components/Message.js","utils/helpers.js","components/LoadingIndicator.js","components/Messages.js","components/MessageForm.js","components/UpdateModal.js","components/Chat.js","components/Intro.js","components/Login.js","components/SignUp.js","components/PageNotFound.js","components/App.js","utils/authentication.js","index.js"],"names":["Store","createContext","connectStore","Component","props","react_default","a","createElement","store_Store","Consumer","value","Object","assign","API_URL","NavBar","handleLogout","e","preventDefault","fetch","concat","method","headers","Content-Type","then","res","json","error","_this","handleLogoutUser","history","push","catch","console","log","nextProps","loggedUser","this","className","react_router_dom","to","name","href","onClick","withRouter","SearchUsers","_ref","queryUsers","_useState","useState","_useState2","slicedToArray","searchQuery","setSearchQuery","onSubmit","type","placeholder","onChange","target","UserItem","user","activeUserID","setActiveUser","id","username","UsersList","users","length","map","components_UserItem","key","Message","conversation","loggedUserID","deleteMessage","setUpdatedMessage","message","sender","text","date","Date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","formatDate","createdAt","_id","LoadingIndicator","Messages","messages","undefined","components_LoadingIndicator","components_Message","MessageForm","sendMessage","setMessage","spellCheck","UpdateModal","_this$props","closeModal","updatedMessage","handleUpdateMessage","data-dismiss","htmlFor","cols","rows","ref","el","textMessage","Chat","state","searchedQuery","conversations","showModal","handleSearchUsers","setState","handleSetActiveUser","userID","receiver","prevState","objectSpread","defineProperty","handleSendMessage","data","body","JSON","stringify","toConsumableArray","handleDeleteMessage","messageID","convID","conv","_this$state","updateMessage","_this2","react_router","_this$state2","filter","includes","Fragment","components_NavBar","components_UpdateModal","components_MessageForm","components_Messages","components_SearchUsers","components_UsersList","Intro","Login","password","handleInputChange","inputName","handleSubmit","handleLoginUser","components_Intro","SignUp","confirmPassword","c-password","PageNotFound","App","loading","fromEntries","document","cookie","split","trim","storeValue","Provider","exact","path","component","ReactDOM","render","components_App","getElementById"],"mappings":"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","file":"static/js/main.f26d30c1.chunk.js","sourcesContent":["import React, { createContext } from \"react\"\r\n\r\nconst Store = createContext({})\r\n\r\nexport const getStore = () => Store\r\n\r\nexport function connectStore(Component) {\r\n  return (props) => (\r\n    <Store.Consumer>\r\n      {(value) => <Component {...props} {...value} />}\r\n    </Store.Consumer>\r\n  )\r\n}\r\n","const API_URL = \"http://localhost:8000/api\"\r\n\r\nexport function login(data) {\r\n  return fetch(`${API_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function signup(data) {\r\n  return fetch(`${API_URL}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function logout() {\r\n  return fetch(`${API_URL}/logout`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function getLoggedUser() {\r\n  return fetch(`${API_URL}/me`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function getUsers() {\r\n  return fetch(`${API_URL}/users`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function getConversation(sender, receiver) {\r\n  return fetch(\r\n    `${API_URL}/conversation?sender=${sender}&receiver=${receiver}`,\r\n    {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    }\r\n  ).then((res) => res.json())\r\n}\r\n\r\nexport function createConversation(data) {\r\n  return fetch(`${API_URL}/conversation`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function deleteMessage(messageID) {\r\n  return fetch(`${API_URL}/messages/${messageID}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then((res) => res.json())\r\n}\r\n\r\nexport function updateMessage(messageID, text) {\r\n  return fetch(`${API_URL}/messages/${messageID}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify({ text })\r\n  }).then((res) => res.json())\r\n}\r\n","import React, { Component } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { connectStore } from \"../store\"\r\nimport { withRouter } from \"react-router-dom\"\r\nimport { logout } from \"../utils/API\"\r\n\r\nclass NavBar extends Component {\r\n  shouldComponentUpdate(nextProps){\r\n    return nextProps.loggedUser !== null\r\n  }\r\n\r\n  handleLogout = (e) => {\r\n    e.preventDefault()\r\n    logout().then((res) => {\r\n        if (!res.error) {\r\n          this.props.handleLogoutUser()\r\n          this.props.history.push(\"/login\")\r\n        }\r\n        // Else show form errors\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { loggedUser } = this.props\r\n    return (\r\n      <nav className=\"navbar navbar-light bg-light\">\r\n        <div className=\"container\">\r\n          <Link to=\"/\" className=\"navbar-brand\">\r\n            Guestbook\r\n          </Link>\r\n          <div>\r\n            <ul className=\"navbar-nav ml-auto\">\r\n              <li className=\"nav-item\">\r\n                <span>Welcome, {loggedUser.name}</span>\r\n                <a\r\n                  href=\"/logout\"\r\n                  className=\"nav-link d-inline-block ml-3\"\r\n                  onClick={this.handleLogout}>\r\n                  Logout\r\n                </a>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\nexport default withRouter(connectStore(NavBar))\r\n","import React, { useState } from \"react\"\r\n\r\n// Component to search for users\r\nfunction SearchUsers({ queryUsers }) {\r\n  const [searchQuery, setSearchQuery] = useState(\"\")\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    queryUsers(searchQuery)\r\n    setSearchQuery(\"\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex flex-nowrap search-users\">\r\n      <form className=\"w-100\" onSubmit={handleSubmit}>\r\n        <div className=\"input-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control search-users__input\"\r\n            placeholder=\"Enter name or username\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n          />\r\n          <div className=\"input-group-append\">\r\n            <button type=\"submit\" className=\"btn btn-outline-primary\">\r\n              Search\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchUsers\r\n","import React from \"react\"\r\n\r\nfunction UserItem({ user, activeUserID, setActiveUser }) {\r\n  return (\r\n    <li\r\n      className={\r\n        \"list-group-item list-group-item-action user-item\" +\r\n        (activeUserID === user.id ? \" active\" : \"\")\r\n      }\r\n      onClick={() => setActiveUser(user.id)}>\r\n      <h6 className=\"user-item__name\">{user.name}</h6>\r\n      <p className=\"user-item__username\">{user.username}</p>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default UserItem\r\n","import React from \"react\"\r\nimport UserItem from \"./UserItem\"\r\n\r\n// Users list shows the available users\r\nfunction UsersList({ users, activeUserID, setActiveUser }) {\r\n  if (users.length === 0)\r\n    return (\r\n      <div className=\"empty-user-list d-flex justify-content-center align-items-center\">\r\n        No available users!\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <ul className=\"list-group\">\r\n      {users.map((user) => (\r\n        <UserItem\r\n          key={user.id}\r\n          user={user}\r\n          activeUserID={activeUserID}\r\n          setActiveUser={setActiveUser}\r\n        />\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default UsersList\r\n","import React from \"react\"\r\nimport { formatDate } from \"../utils/helpers\"\r\n\r\nfunction Message({\r\n  conversation,\r\n  loggedUserID,\r\n  deleteMessage,\r\n  setUpdatedMessage\r\n}) {\r\n  if (!conversation.message)\r\n    return (\r\n      <li className=\"message-item px-3 py-1 mb-4\">\r\n        <div className=\"message-item__text py-2\">This message was deleted</div>\r\n      </li>\r\n    )\r\n\r\n  return (\r\n    <li\r\n      className={\r\n        \"message-item px-3 py-1 mb-4 \" +\r\n        (loggedUserID === conversation.sender ? \"mr-auto\" : \"ml-auto\")\r\n      }>\r\n      <div className=\"message-item__date\">\r\n        {formatDate(conversation.createdAt)}\r\n      </div>\r\n      <div className=\"message-item__text py-2\">{conversation.message.text}</div>\r\n      {loggedUserID === conversation.sender && (\r\n        <div className=\"btn-group btn-group-sm d-flex flex-row-reverse\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"message-item__button text-danger\"\r\n            onClick={() =>\r\n              deleteMessage(conversation.message._id, conversation._id)\r\n            }>\r\n            Delete\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"message-item__button text-info\"\r\n            onClick={() =>\r\n              setUpdatedMessage(conversation.message, conversation._id)\r\n            }>\r\n            Update\r\n          </button>\r\n        </div>\r\n      )}\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","export function formatDate(text) {\r\n  const date = new Date(text)\r\n  return `${date.getDate()}/${date.getMonth() +\r\n    1}/${date.getFullYear()}, ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`\r\n}\r\n","import React from \"react\"\r\n\r\nconst LoadingIndicator = () => {\r\n  return <div className=\"loading\"></div>\r\n}\r\n\r\nexport default LoadingIndicator\r\n","import React from \"react\"\r\nimport Message from \"./Message\"\r\nimport LoadingIndicator from \"./LoadingIndicator\"\r\n\r\nfunction Messages({\r\n  messages,\r\n  loggedUserID,\r\n  deleteMessage,\r\n  setUpdatedMessage\r\n}) {\r\n  if (messages === undefined)\r\n    return (\r\n      <div className=\"empty-message-list d-flex justify-content-center align-items-center\">\r\n        <LoadingIndicator />\r\n      </div>\r\n    )\r\n  else if (messages.length === 0)\r\n    return (\r\n      <div className=\"empty-message-list d-flex justify-content-center align-items-center\">\r\n        No messages!\r\n      </div>\r\n    )\r\n\r\n  return (\r\n    <ul className=\"list-unstyled px-3 pt-2\">\r\n      {messages.map((message) => (\r\n        <Message\r\n          key={message.id}\r\n          conversation={message}\r\n          loggedUserID={loggedUserID}\r\n          deleteMessage={deleteMessage}\r\n          setUpdatedMessage={setUpdatedMessage}\r\n        />\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Messages\r\n","import React, { useState } from \"react\"\r\n\r\n// Controlled component for message input\r\nfunction MessageForm({ sendMessage }) {\r\n  const [message, setMessage] = useState(\"\")\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    sendMessage(message)\r\n    setMessage(\"\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex flex-nowrap message-form\">\r\n      <form className=\"w-100\" onSubmit={handleSubmit}>\r\n        <div className=\"input-group\">\r\n          <textarea\r\n            className=\"message-form__input\"\r\n            placeholder=\"Enter Your Message\"\r\n            spellCheck={true}\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n          ></textarea>\r\n          <div className=\"input-group-append\">\r\n            <button type=\"submit\" className=\"btn btn-outline-primary\">\r\n              Send\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MessageForm\r\n","import React, { Component } from \"react\"\r\n\r\nclass UpdateModal extends Component {\r\n  render() {\r\n    const { closeModal, updatedMessage, handleUpdateMessage } = this.props\r\n\r\n    return (\r\n      <div className=\"modal d-block\">\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\">Update Message</h5>\r\n              <button type=\"button\" className=\"close\" data-dismiss=\"modal\">\r\n                <span onClick={closeModal}>&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <label htmlFor=\"text\" className=\"col-form-label mb-2\">\r\n                Enter the new message\r\n              </label>\r\n              <textarea\r\n                id=\"text\"\r\n                cols=\"30\"\r\n                rows=\"10\"\r\n                className=\"form-control\"\r\n                ref={(el) => (this.textMessage = el)}>\r\n                {updatedMessage.text}\r\n              </textarea>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-primary\"\r\n                onClick={() => handleUpdateMessage(this.textMessage.value)}>\r\n                Save Changes\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                onClick={closeModal}>\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default UpdateModal\r\n","import React, { Component } from \"react\"\r\nimport NavBar from \"./NavBar\"\r\nimport SearchUsers from \"./SearchUsers\"\r\nimport UsersList from \"./UsersList\"\r\nimport Messages from \"./Messages\"\r\nimport MessageForm from \"./MessageForm\"\r\nimport UpdateModal from \"./UpdateModal\"\r\nimport { connectStore } from \"../store\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\nimport {\r\n  getUsers,\r\n  getConversation,\r\n  createConversation,\r\n  deleteMessage,\r\n  updateMessage\r\n} from \"../utils/API\"\r\n\r\n/* The main page consists of two section:\r\nmessages to view and CRUD messages\r\nusers to search and select users to their messages */\r\nclass Chat extends Component {\r\n  state = {\r\n    users: [],\r\n    searchedQuery: \"\",\r\n    activeUserID: \"\",\r\n    conversations: {},\r\n    showModal: false,\r\n    updatedMessage: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    getUsers()\r\n      .then((res) => {\r\n        if (!res.error) this.setState({ users: res.users })\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  handleSearchUsers = (searchedQuery) => {\r\n    this.setState({ searchedQuery })\r\n  }\r\n\r\n  handleSetActiveUser = (userID) => {\r\n    const { loggedUser } = this.props\r\n    const { conversations } = this.state\r\n\r\n    this.setState({ activeUserID: userID })\r\n\r\n    if (!conversations[userID]) {\r\n      getConversation(loggedUser.id, userID)\r\n        .then((res) => {\r\n          if (!res.error) {\r\n            this.setState((prevState) => ({\r\n              conversations: {\r\n                ...prevState.conversations,\r\n                [userID]: res.conversations\r\n              }\r\n            }))\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    }\r\n  }\r\n\r\n  handleSendMessage = (message) => {\r\n    const { activeUserID } = this.state\r\n    const { loggedUser } = this.props\r\n\r\n    createConversation({\r\n      sender: loggedUser.id,\r\n      receiver: activeUserID,\r\n      text: message\r\n    })\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          this.setState((prevState) => ({\r\n            conversations: {\r\n              ...prevState.conversations,\r\n              [activeUserID]: [\r\n                ...prevState.conversations[activeUserID],\r\n                res.conversation\r\n              ]\r\n            }\r\n          }))\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  handleDeleteMessage = (messageID, convID) => {\r\n    const { activeUserID } = this.state\r\n\r\n    deleteMessage(messageID)\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          this.setState((prevState) => ({\r\n            conversations: {\r\n              ...prevState.conversations,\r\n              [activeUserID]: prevState.conversations[\r\n                activeUserID\r\n              ].map((conv) =>\r\n                conv._id === convID\r\n                  ? Object.assign(conv, { message: null })\r\n                  : Object.assign(conv, {})\r\n              )\r\n            }\r\n          }))\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  closeModal = () => {\r\n    this.setState({ showModal: false })\r\n  }\r\n\r\n  setUpdatedMessage = (message, convID) => {\r\n    this.setState({\r\n      showModal: true,\r\n      updatedMessage: {\r\n        message,\r\n        convID\r\n      }\r\n    })\r\n  }\r\n\r\n  handleUpdateMessage = (text) => {\r\n    const { updatedMessage, activeUserID } = this.state\r\n    updateMessage(updatedMessage.message._id, text)\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          this.setState((prevState) => ({\r\n            conversations: {\r\n              ...prevState.conversations,\r\n              [activeUserID]: prevState.conversations[\r\n                activeUserID\r\n              ].map((conv) =>\r\n                conv._id === updatedMessage.convID\r\n                  ? Object.assign(conv, { message: res.message })\r\n                  : { ...conv }\r\n              )\r\n            },\r\n            showModal: false\r\n          }))\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { loggedUser } = this.props\r\n    if (!loggedUser) return <Redirect to=\"/login\" />\r\n\r\n    let { users } = this.state\r\n    const {\r\n      searchedQuery,\r\n      activeUserID,\r\n      conversations,\r\n      showModal,\r\n      updatedMessage\r\n    } = this.state\r\n    users = users.filter(\r\n      (user) =>\r\n        user.id !== loggedUser.id &&\r\n        (user.name.includes(searchedQuery) ||\r\n          user.username.includes(searchedQuery))\r\n    )\r\n\r\n    return (\r\n      <>\r\n        <NavBar />\r\n        <div className=\"container pt-1 chat\">\r\n          {showModal && (\r\n            <UpdateModal\r\n              closeModal={this.closeModal}\r\n              updatedMessage={updatedMessage.message}\r\n              handleUpdateMessage={this.handleUpdateMessage}\r\n            />\r\n          )}\r\n          <div className=\"row px-3\">\r\n            <div className=\"col-12 col-md-6 col-lg-8 order-1 ordre-md-0 messages-section\">\r\n              {activeUserID && (\r\n                <MessageForm sendMessage={this.handleSendMessage} />\r\n              )}\r\n              {activeUserID ? (\r\n                <Messages\r\n                  messages={conversations[activeUserID]}\r\n                  loggedUserID={loggedUser.id}\r\n                  deleteMessage={this.handleDeleteMessage}\r\n                  setUpdatedMessage={this.setUpdatedMessage}\r\n                />\r\n              ) : (\r\n                <div className=\"empty-message-list d-flex justify-content-center align-items-center\">\r\n                  Select user to start conversation\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"col-12 col-md-6 col-lg-4 order-0 order-md-1 users-section\">\r\n              <SearchUsers queryUsers={this.handleSearchUsers} />\r\n              <UsersList\r\n                users={users}\r\n                activeUserID={activeUserID}\r\n                setActiveUser={this.handleSetActiveUser}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </>\r\n    )\r\n  }\r\n}\r\nexport default withRouter(connectStore(Chat))\r\n","import React from \"react\"\r\n\r\nfunction Intro() {\r\n  return (\r\n    <div className=\"col-12 col-md-8 col-lg-5 m-auto\">\r\n      <h1>Guestbook</h1>\r\n      <p className=\"lead\">\r\n        Send messages to other members and reply to messages\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Intro\r\n","import React, { Component } from \"react\"\r\nimport Intro from \"./Intro\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { connectStore } from \"../store\"\r\nimport { login } from \"../utils/API\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\n\r\n// Controlled component for login page\r\nclass Login extends Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\"\r\n  }\r\n\r\n  // Handle input change by passing the name of the input to change the state\r\n  handleInputChange = (e, inputName) => {\r\n    this.setState({ [inputName]: e.target.value })\r\n  }\r\n\r\n  // Handle login form submit\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    login(this.state)\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          this.props.handleLoginUser(res)\r\n          this.props.history.push(\"/\")\r\n        }\r\n        // Else show form errors\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    if (this.props.loggedUser) return <Redirect to=\"/\" />\r\n\r\n    const { username, password } = this.state\r\n\r\n    return (\r\n      <div className=\"container mt-5 p-2\">\r\n        <div className=\"row m-auto\">\r\n          <Intro />\r\n          <div className=\"col-12 col-md-8 col-lg-5 m-auto\">\r\n            <form onSubmit={this.handleSubmit}>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"username\" className=\"col-form-label\">\r\n                  Username\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"username\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Mohamed55\"\r\n                  value={username}\r\n                  onChange={(e) => this.handleInputChange(e, \"username\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"password\" className=\"col-form-label\">\r\n                  Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Enter your password\"\r\n                  value={password}\r\n                  onChange={(e) => this.handleInputChange(e, \"password\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Login\"\r\n                  className=\"btn d-inline-block btn-outline-primary\"\r\n                />\r\n                <Link\r\n                  to=\"/signup\"\r\n                  className=\"d-inline-block ml-auto align-self-center\">\r\n                  Not a member? Sign up\r\n                </Link>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connectStore(Login))\r\n","import React, { Component } from \"react\"\r\nimport Intro from \"./Intro\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { connectStore } from \"../store\"\r\nimport { withRouter, Redirect } from \"react-router-dom\"\r\nimport { signup } from \"../utils/API\"\r\n\r\n// Controlled component for signup page\r\nclass SignUp extends Component {\r\n  state = {\r\n    name: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    confirmPassword: \"\"\r\n  }\r\n\r\n  // Handle input change by passing the name of the input to change the state\r\n  handleInputChange = (e, inputName) => {\r\n    this.setState({ [inputName]: e.target.value })\r\n  }\r\n\r\n  // Handle signup form submit\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n    const { name, username, password, confirmPassword } = this.state\r\n    signup({\r\n      name,\r\n      username,\r\n      password,\r\n      \"c-password\": confirmPassword\r\n    })\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          this.props.handleLoginUser(res)\r\n          this.props.history.push(\"/\")\r\n        }\r\n        // Else show form errors\r\n      })\r\n      .catch((error) => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  render() {\r\n    if (this.props.loggedUser) return <Redirect to=\"/\" />\r\n\r\n    const { name, username, password, confirmPassword } = this.state\r\n\r\n    return (\r\n      <div className=\"container mt-5 p-2\">\r\n        <div className=\"row m-auto\">\r\n          <Intro />\r\n          <div className=\"col-12 col-md-8 col-lg-5 m-auto\">\r\n            <form onSubmit={this.handleSubmit}>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"name\" className=\"col-form-label\">\r\n                  Name\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Enter your name\"\r\n                  value={name}\r\n                  onChange={(e) => this.handleInputChange(e, \"name\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"username\" className=\"col-form-label\">\r\n                  Username\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"username\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Mohamed55\"\r\n                  value={username}\r\n                  onChange={(e) => this.handleInputChange(e, \"username\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"password\" className=\"col-form-label\">\r\n                  Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Enter your password\"\r\n                  value={password}\r\n                  onChange={(e) => this.handleInputChange(e, \"password\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row mb-2\">\r\n                <label htmlFor=\"c-password\" className=\"col-form-label\">\r\n                  Confirm Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"c-password\"\r\n                  className=\"form-control\"\r\n                  placeholder=\"Enter the same password as before\"\r\n                  value={confirmPassword}\r\n                  onChange={(e) => this.handleInputChange(e, \"confirmPassword\")}\r\n                />\r\n              </div>\r\n              <div className=\"form-row\">\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Sign Up\"\r\n                  className=\"btn d-inline-block btn-outline-primary\"\r\n                />\r\n                <Link\r\n                  to=\"/login\"\r\n                  className=\"d-inline-block ml-auto align-self-center\">\r\n                  Already a member? Login\r\n                </Link>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(connectStore(SignUp))\r\n","import React from \"react\"\r\n\r\nfunction PageNotFound() {\r\n  return (\r\n    <div className=\"not-found\">\r\n      <div>\r\n        <h1 className=\"not-found__title\">404</h1>\r\n        <div className=\"not-found-subheader\">\r\n          <h2 className=\"not-found__subtitle\">This page could not be found</h2>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PageNotFound\r\n","import React, { Component } from \"react\"\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\"\r\nimport Chat from \"./Chat\"\r\nimport Login from \"./Login\"\r\nimport SignUp from \"./SignUp\"\r\nimport PageNotFound from \"./PageNotFound\"\r\nimport { getStore } from \"../store\"\r\nimport { checkAuthedUser } from \"../utils/authentication\"\r\nimport { getLoggedUser } from \"../utils/API\"\r\nimport LoadingIndicator from \"./LoadingIndicator\"\r\n\r\nclass App extends Component {\r\n  state = {\r\n    loading: true,\r\n    loggedUser: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.state.loggedUser && checkAuthedUser()) {\r\n      getLoggedUser()\r\n        .then((res) => {\r\n          if (!res.error) {\r\n            this.setState({ loggedUser: res, loading: false })\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    } else this.setState({ loading: false })\r\n  }\r\n\r\n  handleLoginUser = (loggedUser) => {\r\n    this.setState({ loggedUser })\r\n  }\r\n\r\n  handleLogoutUser = () => {\r\n    this.setState({ loggedUser: null })\r\n  }\r\n\r\n  render() {\r\n    const { loading } = this.state\r\n    if (loading)\r\n      return (\r\n        <div className=\"loading-container\">\r\n          <LoadingIndicator />\r\n        </div>\r\n      )\r\n\r\n    const storeValue = {\r\n      ...this.state,\r\n      handleLoginUser: this.handleLoginUser,\r\n      handleLogoutUser: this.handleLogoutUser\r\n    }\r\n    const Store = getStore()\r\n\r\n    return (\r\n      <Store.Provider value={storeValue}>\r\n        <BrowserRouter>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Chat} />\r\n            <Route path=\"/login\" component={Login} />\r\n            <Route path=\"/Signup\" component={SignUp} />\r\n            <Route component={PageNotFound} />\r\n          </Switch>\r\n        </BrowserRouter>\r\n      </Store.Provider>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","// A function to check if the user is authenticated\r\nexport function checkAuthedUser() {\r\n  const cookies = Object.fromEntries(\r\n    document.cookie.split(\";\").map((e) => e.trim().split(\"=\"))\r\n  )\r\n\r\n  return !!cookies[\"SID\"]\r\n}\r\n","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport App from \"./components/App\"\r\nimport \"./styles/bootstrap.min.css\"\r\nimport \"./styles/index.css\"\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"))\r\n"],"sourceRoot":""}